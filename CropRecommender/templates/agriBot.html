{% extends "base.html" %}

{% block title %} <span class="font-italianno text-4xl">*** Agri Bot ***</span> {% endblock title %}

{% block content %}

<main class="flex-grow flex flex-col items-center px-4">
    
    <!-- Sidebar + Chat Section Container -->
    <div class="flex w-full h-96 mt-4 mb-1 flex-col md:flex-row">
        
        <!-- Sidebar for Chat History -->
        <div class="w-full md:w-1/5 text-white p-2 flex flex-col h-96 rounded-lg bg-teal-600 md:block hidden" id="sidebar">
            <h2 class="text-xl font-semibold mb-4">Chat History</h2>
            <ul id="chat-history" class="space-y-2 overflow-y-auto scrollbar-hide flex-1 h-full max-h-80">
                <li class="p-2 bg-teal-700 rounded">Chat 1</li>
                <li class="p-2 bg-gray-700 rounded">Chat 2</li>
                <li class="p-2 bg-gray-700 rounded">Chat 3</li>
                <li class="p-2 bg-gray-700 rounded">Chat 4</li>
                <li class="p-2 bg-gray-700 rounded">Chat 5</li>
                <li class="p-2 bg-gray-700 rounded">Chat 6</li>
               
            </ul>
        </div>
        
        <!-- Sidebar Toggle Button (Mobile) -->
        <button class="md:hidden bg-teal-600 text-white p-2 rounded-lg mb-2" onclick="toggleSidebar()">â˜° Chat History</button>
        
        <!-- Main Chatbot Section -->
        <div class="flex flex-col flex-1 items-center p-4 w-full">
            
            <!-- Chat Container (Scrollable) -->
            <div id="chat-container" class="w-full md:w-4/5 h-72 rounded-lg p-4 overflow-y-auto scrollbar-hide bg-gray-800">
                <div class="text-white text-xl font-bold">Ask me anything!!</div>
            </div>
            
            <!-- User Input Section -->
            <div class="mt-4 w-full md:w-4/5 flex flex-col sm:flex-row">
                <input id="user-input" type="text" placeholder="Type your message..." 
                    class="flex-1 p-2 rounded-lg bg-gray-700 text-white w-full sm:w-auto">
                <button id="send-btn" class="mt-2 sm:mt-0 sm:ml-2 bg-white text-teal-700 font-bold py-2 px-4 rounded-lg">
                    SEND
                </button>
            </div>
        </div>
    </div>
</main>

<script>
    function toggleSidebar() {
        let sidebar = document.getElementById("sidebar");
        if (sidebar.classList.contains("hidden")) {
            sidebar.classList.remove("hidden");
        } else {
            sidebar.classList.add("hidden");
        }
    }

    document.getElementById("send-btn").addEventListener("click", function() {
        let inputField = document.getElementById("user-input");
        let message = inputField.value.trim();
        if (message) {
            let chatContainer = document.getElementById("chat-container");
            let newMessage = document.createElement("div");
            newMessage.classList.add("text-white", "p-2", "mt-2", "bg-blue-600", "rounded-lg", "self-end");
            newMessage.innerText = message;
            chatContainer.appendChild(newMessage);
            inputField.value = ""; 
            chatContainer.scrollTop = chatContainer.scrollHeight; // Auto-scroll to latest message
        }
    });
</script>

{% endblock content %}
